<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/miao.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/miao.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/miao.ico">
  <link rel="mask-icon" href="/images/miao.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css" integrity="sha256-no0c5ccDODBwp+9hSmV5VvPpKwHCpbVzXHexIkupM6U=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js" integrity="sha256-a5YRB27CcBwBFcT5EF/f3E4vzIqyHrSR878nseNYw64=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;seachan0117.github.io&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.5.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;right&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:&quot;gitalk&quot;,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null,&quot;activeClass&quot;:&quot;gitalk&quot;},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:1,&quot;unescape&quot;:false,&quot;preload&quot;:false}}</script><script src="/js/config.js"></script>
<meta name="description" content="找工作的小伙伴是否有注意到，现在招聘要求中基本都会涉及性能优化的部分？前端涉及优化点很多，本文重点关注JavaScript语言层面能做的优化，今天我们就来让 JavaScript 搞快点，从以下几点展开介绍：  内存管理  垃圾回收与常见的GC算法  V8引擎的垃圾回收  Performance工具  代码优化实例">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript 性能优化">
<meta property="og:url" content="https://seachan0117.github.io/2021/06/11/javascript-optimize/index.html">
<meta property="og:site_name" content="SeaChan">
<meta property="og:description" content="找工作的小伙伴是否有注意到，现在招聘要求中基本都会涉及性能优化的部分？前端涉及优化点很多，本文重点关注JavaScript语言层面能做的优化，今天我们就来让 JavaScript 搞快点，从以下几点展开介绍：  内存管理  垃圾回收与常见的GC算法  V8引擎的垃圾回收  Performance工具  代码优化实例">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/1.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/2.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/3.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/4.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/5.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/6.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/7.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/8.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/9.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/10.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/11.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/12.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/13.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/14.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/15.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/16.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/17.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/18.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/19.jpg">
<meta property="article:published_time" content="2021-06-11T09:44:23.000Z">
<meta property="article:modified_time" content="2021-06-11T06:18:44.888Z">
<meta property="article:author" content="Sea Chan">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/1.jpg">


<link rel="canonical" href="https://seachan0117.github.io/2021/06/11/javascript-optimize/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;https:&#x2F;&#x2F;seachan0117.github.io&#x2F;2021&#x2F;06&#x2F;11&#x2F;javascript-optimize&#x2F;&quot;,&quot;path&quot;:&quot;2021&#x2F;06&#x2F;11&#x2F;javascript-optimize&#x2F;&quot;,&quot;title&quot;:&quot;JavaScript 性能优化&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>JavaScript 性能优化 | SeaChan</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>
  <a target="_blank" rel="noopener" href="https://github.com/SeaChan0117" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">SeaChan</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%EF%BC%88Memory-Management%EF%BC%89"><span class="nav-number">1.</span> <span class="nav-text">JavaScript内存管理（Memory Management）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.1.</span> <span class="nav-text">内存管理介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="nav-number">1.2.</span> <span class="nav-text">JavaScript中的内存管理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript%E4%B8%AD%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6"><span class="nav-number">2.</span> <span class="nav-text">JavaScript中的垃圾回收机制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#GC%EF%BC%88Garbage-Collection%EF%BC%89%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.</span> <span class="nav-text">GC（Garbage Collection）算法介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#GC%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="nav-number">3.1.</span> <span class="nav-text">GC定义与作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GC%E7%AE%97%E6%B3%95%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">3.2.</span> <span class="nav-text">GC算法是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84GC%E7%AE%97%E6%B3%95"><span class="nav-number">3.3.</span> <span class="nav-text">常见的GC算法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E7%AE%97%E6%B3%95"><span class="nav-number">4.</span> <span class="nav-text">引用计数算法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E7%AE%97%E6%B3%95%E4%BC%98%E7%82%B9%EF%BC%9A"><span class="nav-number">4.1.</span> <span class="nav-text">引用计数算法优点：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E7%AE%97%E6%B3%95%E7%BC%BA%E7%82%B9%EF%BC%9A"><span class="nav-number">4.2.</span> <span class="nav-text">引用计数算法缺点：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95"><span class="nav-number">5.</span> <span class="nav-text">标记清除算法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95%E4%BC%98%E7%82%B9%EF%BC%9A"><span class="nav-number">5.1.</span> <span class="nav-text">标记清除算法优点：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95%E7%BC%BA%E7%82%B9%EF%BC%9A"><span class="nav-number">5.2.</span> <span class="nav-text">标记清除算法缺点：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%87%E8%AE%B0%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95"><span class="nav-number">6.</span> <span class="nav-text">标记整理算法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#V8"><span class="nav-number">7.</span> <span class="nav-text">V8</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#V8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="nav-number">7.1.</span> <span class="nav-text">V8垃圾回收策略：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#V8%E4%B8%AD%E5%B8%B8%E7%94%A8GC%E7%AE%97%E6%B3%95%EF%BC%9A"><span class="nav-number">7.2.</span> <span class="nav-text">V8中常用GC算法：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#V8%E5%9B%9E%E6%94%B6%E6%96%B0%E7%94%9F%E4%BB%A3%E5%AF%B9%E8%B1%A1%EF%BC%9A%EF%BC%88%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95%EF%BC%8C%E7%A9%BA%E9%97%B4%E6%8D%A2%E6%97%B6%E9%97%B4%EF%BC%89"><span class="nav-number">7.3.</span> <span class="nav-text">V8回收新生代对象：（复制算法，空间换时间）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#V8%E5%9B%9E%E6%94%B6%E8%80%81%E7%94%9F%E4%BB%A3%E5%AF%B9%E8%B1%A1%EF%BC%9A"><span class="nav-number">7.4.</span> <span class="nav-text">V8回收老生代对象：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%91%E6%8E%A7%E5%86%85%E5%AD%98%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-number">8.</span> <span class="nav-text">监控内存的几种方式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E7%9B%91%E6%8E%A7%E5%86%85%E5%AD%98"><span class="nav-number">9.</span> <span class="nav-text">浏览器任务管理器监控内存</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="nav-number">10.</span> <span class="nav-text">JavaScript代码性能测试</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="nav-number">11.</span> <span class="nav-text">JavaScript代码优化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%85%8E%E7%94%A8%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="nav-number">11.1.</span> <span class="nav-text">慎用全局变量：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%AD%98%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="nav-number">11.2.</span> <span class="nav-text">缓存全局变量：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%8E%9F%E5%9E%8B%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="nav-number">11.3.</span> <span class="nav-text">通过原型新增方法：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%81%BF%E5%BC%80%E9%97%AD%E5%8C%85%E9%99%B7%E9%98%B1%EF%BC%9A"><span class="nav-number">11.4.</span> <span class="nav-text">避开闭包陷阱：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%81%BF%E5%85%8D%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="nav-number">11.5.</span> <span class="nav-text">避免属性访问方法的使用：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96%EF%BC%9A"><span class="nav-number">11.6.</span> <span class="nav-text">for循环优化：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%87%E7%94%A8%E6%9C%80%E4%BC%98%E5%BE%AA%E7%8E%AF%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="nav-number">11.7.</span> <span class="nav-text">采用最优循环方式：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%A1%A3%E7%A2%8E%E7%89%87%E4%BC%98%E5%8C%96%E8%8A%82%E7%82%B9%E6%B7%BB%E5%8A%A0%EF%BC%9A"><span class="nav-number">11.8.</span> <span class="nav-text">文档碎片优化节点添加：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%8B%E9%9A%86%E4%BC%98%E5%8C%96%E8%8A%82%E7%82%B9%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="nav-number">11.9.</span> <span class="nav-text">克隆优化节点操作：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E9%87%8F%E6%9B%BF%E6%8D%A2Object%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="nav-number">11.10.</span> <span class="nav-text">直接量替换Object操作：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%8F%E5%B0%91%E5%88%A4%E6%96%AD%E5%B1%82%E6%AC%A1%EF%BC%9A%EF%BC%88%E5%87%8F%E5%B0%91%E4%BA%86%E9%80%BB%E8%BE%91%E5%B5%8C%E5%A5%97%EF%BC%89"><span class="nav-number">11.11.</span> <span class="nav-text">减少判断层次：（减少了逻辑嵌套）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%8F%E5%B0%91%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E6%9F%A5%E6%89%BE%E5%B1%82%E6%AC%A1%EF%BC%9A"><span class="nav-number">11.12.</span> <span class="nav-text">减少作用域链查找层次：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%8F%E5%B0%91%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E6%AC%A1%E6%95%B0%EF%BC%9A"><span class="nav-number">11.13.</span> <span class="nav-text">减少数据读取次数：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E4%B8%8E%E6%9E%84%E9%80%A0%E5%BC%8F%EF%BC%9A"><span class="nav-number">11.14.</span> <span class="nav-text">字面量与构造式：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%8F%E5%B0%91%E5%BE%AA%E7%8E%AF%E4%BD%93%E4%B8%AD%E7%9A%84%E6%B4%BB%E5%8A%A8%EF%BC%9A"><span class="nav-number">11.15.</span> <span class="nav-text">减少循环体中的活动：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%8F%E5%B0%91%E5%A3%B0%E6%98%8E%E5%92%8C%E8%AF%AD%E5%8F%A5%E6%95%B0%EF%BC%9A"><span class="nav-number">11.16.</span> <span class="nav-text">减少声明和语句数：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="nav-number">12.</span> <span class="nav-text">总结：</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sea Chan"
      src="/images/miao.png">
  <p class="site-author-name" itemprop="name">Sea Chan</p>
  <div class="site-description" itemprop="description">Sea Chan's blogs</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://seachan0117.github.io/2021/06/11/javascript-optimize/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/miao.png">
      <meta itemprop="name" content="Sea Chan">
      <meta itemprop="description" content="Sea Chan's blogs">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SeaChan">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaScript 性能优化
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-06-11 09:44:23 / 修改时间：06:18:44" itemprop="dateCreated datePublished" datetime="2021-06-11T09:44:23+00:00">2021-06-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>找工作的小伙伴是否有注意到，现在招聘要求中基本都会涉及性能优化的部分？<br>前端涉及优化点很多，本文重点关注JavaScript语言层面能做的优化，今天我们就来让 JavaScript 搞快点，从以下几点展开介绍：</p>
<ul>
<li><p>内存管理</p>
</li>
<li><p>垃圾回收与常见的GC算法</p>
</li>
<li><p>V8引擎的垃圾回收</p>
</li>
<li><p>Performance工具</p>
</li>
<li><p>代码优化实例  </p>
<span id="more"></span>
<h1 id="JavaScript内存管理（Memory-Management）"><a href="#JavaScript内存管理（Memory-Management）" class="headerlink" title="JavaScript内存管理（Memory Management）"></a>JavaScript内存管理（Memory Management）</h1><h2 id="内存管理介绍"><a href="#内存管理介绍" class="headerlink" title="内存管理介绍"></a>内存管理介绍</h2></li>
<li><p>内存：由可读写单元组成，表示一片可操作空间</p>
</li>
<li><p>管理：人为地去操作一片空间的申请、使用和释放</p>
</li>
<li><p>内存管理：开发者主动申请空间、使用空间、释放空间</p>
</li>
<li><p>管理流程：申请 –&gt; 使用 –&gt; 释放</p>
</li>
</ul>
<h2 id="JavaScript中的内存管理"><a href="#JavaScript中的内存管理" class="headerlink" title="JavaScript中的内存管理"></a>JavaScript中的内存管理</h2><p>JavaScript中没有提供API供开发者主动调用操作内存空间，但是js中的一个生命周期也经历了这几个阶段：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 申请 ===================</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;    <span class="comment">// 变量声明时，分配内存</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 使用 ===================</span></span><br><span class="line">obj.name = <span class="string">&#x27;SeaChan&#x27;</span>    <span class="comment">// 变量的读写操作，操作内存过程</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 释放 ===================</span></span><br><span class="line">obj = <span class="literal">null</span>            <span class="comment">// 变量置空，释放内存</span></span><br></pre></td></tr></table></figure>

<h1 id="JavaScript中的垃圾回收机制"><a href="#JavaScript中的垃圾回收机制" class="headerlink" title="JavaScript中的垃圾回收机制"></a>JavaScript中的垃圾回收机制</h1><p>JavaScript中内存管理是<strong>自动执行</strong>的，是不可见的，对象不再被引用时是垃圾，对象不能从根上访问到时是垃圾，JavaScript会自发的发现并清理它们。</p>
<p><strong>可达对象</strong>：可以访问到的对象就是可达对象（引用，或作用域链），可达的标准就是<strong>从根出发</strong>是否能被找到，JavaScript中的根可以理解为全局变量对象（全局执行上下文）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>: <span class="string">&#x27;SeaChan&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">let</span> obj1 = obj</span><br><span class="line">obj = <span class="literal">null</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1)   <span class="comment">// &#123;name: &quot;SeaChan&quot;&#125; ==&gt; obj1可达</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ==============================================================</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objGroup</span>(<span class="params">obj1, obj2</span>) </span>&#123;</span><br><span class="line">    obj1.next = obj2</span><br><span class="line">    obj2.prev = obj1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">o1</span>: obj1,</span><br><span class="line">        <span class="attr">o2</span>: obj2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = objGroup(&#123;<span class="attr">name</span>: <span class="string">&#x27;obj1&#x27;</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">&#x27;obj2&#x27;</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">// node 运行结果</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     o1: &lt;ref *1&gt; &#123;</span></span><br><span class="line"><span class="comment">//     name: &#x27;obj1&#x27;,</span></span><br><span class="line"><span class="comment">//     next: &#123; name: &#x27;obj2&#x27;, prev: [Circular *1] &#125;</span></span><br><span class="line"><span class="comment">// &#125;,</span></span><br><span class="line"><span class="comment">//     o2: &lt;ref *2&gt; &#123;</span></span><br><span class="line"><span class="comment">//     name: &#x27;obj2&#x27;,</span></span><br><span class="line"><span class="comment">//     prev: &lt;ref *1&gt; &#123; name: &#x27;obj1&#x27;, next: [Circular *2] &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/1.jpg" alt="图1"></p>
<p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/2.jpg" alt="图2"></p>
<h1 id="GC（Garbage-Collection）算法介绍"><a href="#GC（Garbage-Collection）算法介绍" class="headerlink" title="GC（Garbage Collection）算法介绍"></a>GC（Garbage Collection）算法介绍</h1><h2 id="GC定义与作用"><a href="#GC定义与作用" class="headerlink" title="GC定义与作用"></a>GC定义与作用</h2><ul>
<li>GC就是垃圾回收机制的简写；</li>
<li>GC可以找到内存中的垃圾，并释放和回收空间；<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GC 里垃圾是什么</span></span><br><span class="line"><span class="comment">// 程序中不再使用的对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    name = <span class="string">&#x27;SeaChan&#x27;</span>            <span class="comment">// 全局变量，函数调用完后，不再被使用</span></span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 程序中不能再访问到的对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="string">&#x27;SeaChan&#x27;</span>      <span class="comment">// 块级作用域局部变量，函数调用完后，不能再访问到</span></span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="GC算法是什么"><a href="#GC算法是什么" class="headerlink" title="GC算法是什么"></a>GC算法是什么</h2><ul>
<li>GC是一种机制，垃圾回收器完成具体的工作；</li>
<li>工作内容就是查找垃圾释放空间，回收空间；</li>
<li>算法就是工作时查找和回收所遵循的规则；</li>
</ul>
<h2 id="常见的GC算法"><a href="#常见的GC算法" class="headerlink" title="常见的GC算法"></a>常见的GC算法</h2><ul>
<li>引用计数</li>
<li>标记清除</li>
<li>标记整理</li>
<li>分代回收</li>
</ul>
<h1 id="引用计数算法"><a href="#引用计数算法" class="headerlink" title="引用计数算法"></a>引用计数算法</h1><p>通过设置引用数（引用计数器），引用关系改变时，修改引用数值，判断当前引用数是否为0，为0时立即进行回收。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">name</span>: <span class="string">&#x27;SeaChan&#x27;</span>&#125;   <span class="comment">// 对象被 a 引用，引用 +1  count： 1</span></span><br><span class="line">a = <span class="literal">null</span>                    <span class="comment">// 对象引用 -1            count: 0   ====&gt;  将被回收</span></span><br></pre></td></tr></table></figure>

<h2 id="引用计数算法优点："><a href="#引用计数算法优点：" class="headerlink" title="引用计数算法优点："></a>引用计数算法优点：</h2><ul>
<li>发现垃圾时立即回收；（因为引用计数的实时性，能尽快找到垃圾并回收）</li>
<li>最大程度减少程序暂停；（当内存爆满时，能立刻找到引用计数为0的对象进行释放，保证内存充足，减少程序暂停）</li>
</ul>
<h2 id="引用计数算法缺点："><a href="#引用计数算法缺点：" class="headerlink" title="引用计数算法缺点："></a>引用计数算法缺点：</h2><ul>
<li>无法回收循环引用的对象；</li>
<li>时间开销大；（实时对引用进行监控，相对于其他GC算法要消耗更多时间）<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 循环引用的对象</span></span><br><span class="line"><span class="comment">// 在foo局部作用域中，foo调用完后，obj1和obj2是垃圾，但是他们之间互相引用导致两者的引用不为0，无法通过引用计数算法进行回收</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> obj1 = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> obj2 = &#123;&#125;</span><br><span class="line">    obj1.name = obj2</span><br><span class="line">    obj2.name = obj1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;nothing&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="标记清除算法"><a href="#标记清除算法" class="headerlink" title="标记清除算法"></a>标记清除算法</h1><p>标记清除算法由<strong>标记阶段</strong>和<strong>清除阶段</strong>构成。在<strong>标记阶段</strong>会把所有的<strong>活动对象都做上标记</strong>，然后在<strong>清除阶段</strong>会把没有标记的对象，也就是<strong>非活动对象回收</strong>。</p>
<ul>
<li>活动对象：能通过引用程序引用的对象就被称为活动对象。（可以直接或间接从全局变量空间中引出的对象）—&gt; 可达</li>
<li>活动对象：不能通过程序引用的对象被称为非活动对象。—&gt; 不可达</li>
</ul>
<h2 id="标记清除算法优点："><a href="#标记清除算法优点：" class="headerlink" title="标记清除算法优点："></a>标记清除算法优点：</h2><ul>
<li>因为标记清除算法的标准是对象是否可达，所以能解决引用计数算法无法处理循环引用的问题。</li>
</ul>
<h2 id="标记清除算法缺点："><a href="#标记清除算法缺点：" class="headerlink" title="标记清除算法缺点："></a>标记清除算法缺点：</h2><ul>
<li>不能立即回收垃圾对象</li>
<li>清除阶段会把非活动对象回收再利用，由于被清除的非活动对象不是连续的且大小不一，导致空间碎片化严重，在重新分配使用时，不一定是适合的空间大小，每次都得遍历去找到合适的空间，分配速度慢。<br>一篇来自掘金的文章：<a href="https://link.zhihu.com/?target=https://juejin.cn/post/6844903641791348744">垃圾回收算法|GC标记-清除算法</a></li>
</ul>
<h1 id="标记整理算法"><a href="#标记整理算法" class="headerlink" title="标记整理算法"></a>标记整理算法</h1><p>标记整理算法是标记清除算法的增强，第一步标记阶段相同，第二阶段，在清除前，对空间进行整理，将非活动对象空间和空闲空间放到一起，最后清除回收非活动对象，这样过后，绝大部分空闲空间就是连续的，减少了空间碎片，在重新分配使用时效率大大提升。</p>
<h1 id="V8"><a href="#V8" class="headerlink" title="V8"></a>V8</h1><p>题外话：V8是大理比较好喝的一种啤酒=。=！</p>
<ul>
<li>V8是一款主流的JavaScript执行引擎</li>
<li>V8采用即时编译，速度快</li>
<li>V8内存设限（32位800MB，64位1.5GB）（针对浏览器使用；依据其垃圾回收机制，内存太大，垃圾回收时间太长，会造成明显的卡顿）</li>
</ul>
<h2 id="V8垃圾回收策略："><a href="#V8垃圾回收策略：" class="headerlink" title="V8垃圾回收策略："></a>V8垃圾回收策略：</h2><p>采用分代回收的思想，将内存分为新生代、老生代，针对不同的对象采用不用的算法。</p>
<h2 id="V8中常用GC算法："><a href="#V8中常用GC算法：" class="headerlink" title="V8中常用GC算法："></a>V8中常用GC算法：</h2><ul>
<li>分代回收</li>
<li>空间复制</li>
<li>标记清除</li>
<li>标记整理</li>
<li>标记增量</li>
</ul>
<h2 id="V8回收新生代对象：（复制算法，空间换时间）"><a href="#V8回收新生代对象：（复制算法，空间换时间）" class="headerlink" title="V8回收新生代对象：（复制算法，空间换时间）"></a>V8回收新生代对象：（复制算法，空间换时间）</h2><p>V8内存空间一分为二，小空间用于存储新生代对象（这个小空间大小为，64位32MB，32位16MB），新生代只存活时间较短的对象（如局部作用域的变量），新生代又分为两个相等的空间from space 与 to space，两个空间，同一时间内，只会有一个空间在工作( from space )，另一个在休息( to space )。</p>
<ul>
<li>首先，V8 引擎中的垃圾回收器检测到 from space 空间快达到上限了，此时要进行一次垃圾回收了；</li>
<li>然后，从根部开始遍历，不可达对象将会被标记，并且复制未被标记的对象（活动对象），放到 to space 中；</li>
<li>最后，清除 from space 中的数据（非活动对象），同时将 from space 置为空闲状态，即变成 to space，相应的 to space 变成 from space，俗称翻转；</li>
</ul>
<p>当经历一次 form =&gt; to 翻转之后，发现某些未被标记的对象居然还在，会直接扔到老生代里面去；或者在拷贝过程中to空间的使用率超过25%，就会把这次拷贝的数据扔到老生代去，保证翻转后form空间够用。</p>
<h2 id="V8回收老生代对象："><a href="#V8回收老生代对象：" class="headerlink" title="V8回收老生代对象："></a>V8回收老生代对象：</h2><p>V8内存除新生代区域外大的部分（64位1.4GB，32位700MB），老生代对象是指存活时间比较长的对象（如全局变量，闭包产生变量数据等）。老生代区又可分为以下四个区域：</p>
<ul>
<li>old object space，这里的对象大部分是由新生代晋升而来；</li>
<li>large object space，大对象存储区域，其他区域无法存储下的对象会被放在这里，基本是超过 1M 的对象，这种对象不会在新生代对象中分配，直接存放到这里；</li>
<li>Map space，存储对象的映射关系的，其实就是隐藏类（隐藏类参考链接：V8引擎优化机制之隐藏类和内联缓存）；</li>
<li>code space，简单点说，就是存放代码的地方，编译之后的代码；</li>
</ul>
<p>回收过程主要采用标记清除、标记整理、增量标记算法：</p>
<ul>
<li>首先，主要使用标记清除完成垃圾回收；</li>
<li>如果是新生代晋升的对象，且带到老生代后内存不足的情况下，就会触发标记整理进行空间优化；</li>
<li>最后采用增量标记进行效率优化；</li>
</ul>
<p>增量标记：（摘自<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903619720904717">掘金</a>）</p>
<p>为了避免出现 JavaScript 应用逻辑与垃圾回收器看到的不一致的情况,垃圾回收的 3 种基本算法都需要将应用逻辑暂停下来，待执行完垃圾回收后再恢复执行应用逻辑,这种行为被称为“全停顿”，长时间的”全停顿”垃圾回收会让用户感受到明显的卡顿，带来体验的影响。以1.5 GB的垃圾回收堆内存为例,V8做一次小的垃圾回收需要50毫秒以上,做一次非增量式的垃圾回收甚至要1秒以上。这是垃圾回收中引起JavaScript线程暂停执行的时间,在 这样的时间花销下,应用的性能和响应能力都会直线下降。<br>为了降低全堆垃圾回收带来的停顿时间,V8先从标记阶段入手,将原本要一口气停顿完成的动作改为增量标记(incremental marking),也就是拆分为许多小“步进”,每做完一“步进” 就让 JavaScript 应用逻辑执行一小会儿,垃圾回收与应用逻辑交替执行直到标记阶段完成。</p>
<h1 id="监控内存的几种方式"><a href="#监控内存的几种方式" class="headerlink" title="监控内存的几种方式"></a>监控内存的几种方式</h1><p>性能问题：</p>
<ul>
<li>内存泄漏：内存使用持续升高；</li>
<li>内存膨胀：在多数设备上都存在性能问题；</li>
<li>频繁垃圾回收：通过内存变化图进行分析；</li>
</ul>
<p>监控内存方式：</p>
<ul>
<li>浏览器任务管理器；</li>
<li>Timeline时序图记录（精确定位到内存与代码的相关性。）；</li>
<li>堆快照查找分离DOM（浏览器工具内存，堆快照，过滤“deta”查看分离DOM）；</li>
<li>判断是否存在频繁的垃圾回收（Timeline中频繁的上升下降；任务管理器中数据频繁的增加减少）；</li>
</ul>
<h1 id="浏览器任务管理器监控内存"><a href="#浏览器任务管理器监控内存" class="headerlink" title="浏览器任务管理器监控内存"></a>浏览器任务管理器监控内存</h1><p>浏览器中 <strong>shift + esc</strong> 调出任务管理器；JavaScript内存可明显看出代码层面产生的内存，能对整体的内存作出比较明显的观察判断；如果可达对象所占内存持续上升没有下降，则说明没有GC消耗或者内存上升大于GC消耗，存在性能隐患。<br><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/3.jpg" alt="图3"></p>
<h1 id="JavaScript代码性能测试"><a href="#JavaScript代码性能测试" class="headerlink" title="JavaScript代码性能测试"></a>JavaScript代码性能测试</h1><p>一下两个地址可对 JavaScript 代码进行性能测试：<br><a target="_blank" rel="noopener" href="https://jsperf.com/">https://jsperf.com</a><br><a target="_blank" rel="noopener" href="https://jsbench.me/">https://jsbench.me</a></p>
<h1 id="JavaScript代码优化"><a href="#JavaScript代码优化" class="headerlink" title="JavaScript代码优化"></a>JavaScript代码优化</h1><h2 id="慎用全局变量："><a href="#慎用全局变量：" class="headerlink" title="慎用全局变量："></a>慎用全局变量：</h2><p>全局变量定义在全局执行上下文，是所有作用域链的顶端；<br>全局执行上下文一直存在于上下文执行栈，直到程序退出；<br>如果某个局部作用域出现了同名变量则会屏蔽或污染全局；<br><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/4.jpg" alt="图4"></p>
<h2 id="缓存全局变量："><a href="#缓存全局变量：" class="headerlink" title="缓存全局变量："></a>缓存全局变量：</h2><p>将使用中无法避免的全局变量缓存到局部。  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接使用全局变量</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBtn0</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn1&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 局部缓存全局变量 ==》 性能更优</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBtn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> doc = <span class="built_in">document</span></span><br><span class="line">    doc.getElementById(<span class="string">&#x27;btn1&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="通过原型新增方法："><a href="#通过原型新增方法：" class="headerlink" title="通过原型新增方法："></a>通过原型新增方法：</h2><p>在原型对象上新增实例对象需要的方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">123</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f1 = <span class="keyword">new</span> foo1()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 性能更优</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">foo2.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">123</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f2 = <span class="keyword">new</span> foo2()</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/5.jpg" alt="图5"></p>
<h2 id="避开闭包陷阱："><a href="#避开闭包陷阱：" class="headerlink" title="避开闭包陷阱："></a>避开闭包陷阱：</h2><p>闭包特点：  </p>
<ul>
<li>外部具有指向内部的引用；</li>
<li>在“外”部作用域访问“内”部作用域的数据；</li>
<li>使用不当容易出现内存泄漏；<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> el = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line">    el.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(el.id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line"><span class="comment">// el使用后，当btn被删除，el的引用也就不存在，不会造成内存泄漏</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> el = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line">    el.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(el.id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    el = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="避免属性访问方法的使用："><a href="#避免属性访问方法的使用：" class="headerlink" title="避免属性访问方法的使用："></a>避免属性访问方法的使用：</h2><ul>
<li>JavaScript不需要属性访问方法，所有属性都是外部可见的；</li>
<li>使用属性访问方法只会增加一层重定义，没有访问的限制能力；<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;SeaChan&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.age = <span class="number">18</span></span><br><span class="line">    <span class="built_in">this</span>.getAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person1()</span><br><span class="line"><span class="keyword">const</span> age1 = p1.getAge()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 性能更优</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;SeaChan&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.age = <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> Person2()</span><br><span class="line"><span class="keyword">const</span> age2 = p2.age</span><br></pre></td></tr></table></figure>
<img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/6.jpg" alt="图6"></li>
</ul>
<h2 id="for循环优化："><a href="#for循环优化：" class="headerlink" title="for循环优化："></a>for循环优化：</h2><p>集合长度定义变量，节省每次遍历的开销。<br><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/7.jpg" alt="图7"></p>
<h2 id="采用最优循环方式："><a href="#采用最优循环方式：" class="headerlink" title="采用最优循环方式："></a>采用最优循环方式：</h2><p>forEach最快<br><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/8.jpg" alt="图8"></p>
<h2 id="文档碎片优化节点添加："><a href="#文档碎片优化节点添加：" class="headerlink" title="文档碎片优化节点添加："></a>文档碎片优化节点添加：</h2><p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/9.jpg" alt="图9"></p>
<h2 id="克隆优化节点操作："><a href="#克隆优化节点操作：" class="headerlink" title="克隆优化节点操作："></a>克隆优化节点操作：</h2><p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/10.jpg" alt="图10"></p>
<h2 id="直接量替换Object操作："><a href="#直接量替换Object操作：" class="headerlink" title="直接量替换Object操作："></a>直接量替换Object操作：</h2><p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/11.jpg" alt="图11"></p>
<h2 id="减少判断层次：（减少了逻辑嵌套）"><a href="#减少判断层次：（减少了逻辑嵌套）" class="headerlink" title="减少判断层次：（减少了逻辑嵌套）"></a>减少判断层次：（减少了逻辑嵌套）</h2><p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/12.jpg" alt="图12"></p>
<h2 id="减少作用域链查找层次："><a href="#减少作用域链查找层次：" class="headerlink" title="减少作用域链查找层次："></a>减少作用域链查找层次：</h2><p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/13.jpg" alt="图13"></p>
<h2 id="减少数据读取次数："><a href="#减少数据读取次数：" class="headerlink" title="减少数据读取次数："></a>减少数据读取次数：</h2><p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/14.jpg" alt="图14"></p>
<h2 id="字面量与构造式："><a href="#字面量与构造式：" class="headerlink" title="字面量与构造式："></a>字面量与构造式：</h2><p>构造式new的过程相较于字面量多了一次函数调用。<br><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/15.jpg" alt="图15"></p>
<h2 id="减少循环体中的活动："><a href="#减少循环体中的活动：" class="headerlink" title="减少循环体中的活动："></a>减少循环体中的活动：</h2><p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/16.jpg" alt="图16"></p>
<p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/17.jpg" alt="图17"></p>
<h2 id="减少声明和语句数："><a href="#减少声明和语句数：" class="headerlink" title="减少声明和语句数："></a>减少声明和语句数：</h2><p>减少代码解析阶段的工作。<br><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/18.jpg" alt="图18"></p>
<p><img src="https://raw.githubusercontent.com/SeaChan0117/SeaChan0117.github.io/master/source/_posts/javascript-optimize/19.jpg" alt="图19"></p>
<p>##采用事件委托：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;ul&quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>SeaChan<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>18<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单个li绑定事件</span></span><br><span class="line"><span class="keyword">const</span> foo1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> liArr = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;li&#x27;</span>)</span><br><span class="line">    liArr.forEach(<span class="function"><span class="params">li</span> =&gt;</span> &#123;</span><br><span class="line">        li.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(e.target.innerHTML);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">foo1()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 事件委托</span></span><br><span class="line"><span class="keyword">const</span> foo2 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;ul&#x27;</span>)</span><br><span class="line">    ul.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e.target.nodeName.toLowerCase() === <span class="string">&#x27;li&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(e.target.innerHTML);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line">foo2()</span><br></pre></td></tr></table></figure>

<h1 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h1><p>Time is money！前端性能可优化的点还有很多，本文单指纯JavaScript层面的一些优化点，整体可以划分到解析、编译和执行几个阶段上。如果还有未涉及的部分，欢迎大家帮忙指出。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="Sea Chan 微信">
        <span>微信</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/06/11/20210607/" rel="prev" title="通过 Hexo 和 Travis 构建一个属于自己的博客">
                  <i class="fa fa-chevron-left"></i> 通过 Hexo 和 Travis 构建一个属于自己的博客
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sea Chan</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>





  <script class="next-config" data-name="nprogress" type="application/json">{&quot;enable&quot;:true,&quot;spinner&quot;:true}</script>
  <script src="/js/third-party/nprogress.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{&quot;enable&quot;:true,&quot;github_id&quot;:&quot;seachan0117&quot;,&quot;repo&quot;:&quot;seachan0117.github.io&quot;,&quot;client_id&quot;:&quot;40edc46fcd586990c3ea&quot;,&quot;client_secret&quot;:&quot;5a55478d7c493455907dfacf6315f9b0d6bf3702&quot;,&quot;admin_user&quot;:&quot;seachan0117&quot;,&quot;distraction_free_mode&quot;:true,&quot;proxy&quot;:&quot;https:&#x2F;&#x2F;cors-anywhere.azm.workers.dev&#x2F;https:&#x2F;&#x2F;github.com&#x2F;login&#x2F;oauth&#x2F;access_token&quot;,&quot;language&quot;:null,&quot;js&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;gitalk@1.7.2&#x2F;dist&#x2F;gitalk.min.js&quot;,&quot;integrity&quot;:&quot;sha256-Pmj85ojLaPOWwRtlMJwmezB&#x2F;Qg8BzvJp5eTzvXaYAfA&#x3D;&quot;},&quot;path_md5&quot;:&quot;7e7560eb5f3261563aed158b235b4bdb&quot;}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
